<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Real-time collaborative drawing canvas - Draw together with friends in real-time">
    <title>Collaborative Canvas | Draw Together</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Join Room Modal -->
    <div id="join-modal" class="modal active">
        <div class="modal-content">
            <div class="modal-glow"></div>
            <h1 class="modal-title">
                <span class="gradient-text">Collaborative Canvas</span>
            </h1>
            <p class="modal-subtitle">Draw together in real-time</p>
            
            <div class="input-group">
                <label for="user-name-input">Your Name</label>
                <input type="text" id="user-name-input" placeholder="Enter your name" maxlength="20">
            </div>
            
            <div class="input-group">
                <label for="room-id-input">Room ID</label>
                <input type="text" id="room-id-input" placeholder="Enter room ID or leave empty for default" maxlength="30">
            </div>
            
            <button id="join-btn" class="btn-primary">
                <span>Join Canvas</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app-container" class="hidden">
        <!-- Header Toolbar -->
        <header class="toolbar">
            <div class="toolbar-left">
                <div class="logo">
                    <div class="logo-icon"></div>
                    <span class="logo-text">Canvas</span>
                </div>
                <div class="room-info">
                    <span class="room-label">Room:</span>
                    <span id="current-room" class="room-id">default</span>
                </div>
                <button id="leave-room-btn" class="leave-btn" title="Leave Room">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    <span>Leave</span>
                </button>
            </div>
            
            <div class="toolbar-center">
                <!-- Drawing Tools -->
                <div class="tool-group">
                    <label class="tool-label">Tools</label>
                    <div class="tool-buttons">
                        <button id="tool-pen" class="tool-btn small active" title="Pen (P)" data-tool="pen">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                                <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                                <path d="M2 2l7.586 7.586"/>
                            </svg>
                        </button>
                        <button id="tool-eraser" class="tool-btn small" title="Eraser (E)" data-tool="eraser">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 20H7L3 16c-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0l7 7c.6.6.6 1.5 0 2.1L13 22"/>
                            </svg>
                        </button>
                        <button id="tool-line" class="tool-btn small" title="Line (L)" data-tool="line">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="19" x2="19" y2="5"/>
                            </svg>
                        </button>
                        <button id="tool-pan" class="tool-btn small" title="Pan (Hold Space)" data-tool="pan">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 9l-3 3 3 3"/>
                                <path d="M9 5l3-3 3 3"/>
                                <path d="M15 19l-3 3-3-3"/>
                                <path d="M19 9l3 3-3 3"/>
                                <line x1="2" y1="12" x2="22" y2="12"/>
                                <line x1="12" y1="2" x2="12" y2="22"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="tool-divider"></div>
                
                <div class="tool-group">
                    <label class="tool-label">Color</label>
                    <div class="color-picker-wrapper">
                        <input type="color" id="color-picker" value="#FFFFFF">
                        <div class="color-preview" id="color-preview"></div>
                    </div>
                    <div class="quick-colors">
                        <button class="quick-color" data-color="#FF6B6B" style="background:#FF6B6B" title="Red"></button>
                        <button class="quick-color" data-color="#4ECDC4" style="background:#4ECDC4" title="Teal"></button>
                        <button class="quick-color" data-color="#45B7D1" style="background:#45B7D1" title="Blue"></button>
                        <button class="quick-color" data-color="#96CEB4" style="background:#96CEB4" title="Green"></button>
                        <button class="quick-color" data-color="#FFEAA7" style="background:#FFEAA7" title="Yellow"></button>
                        <button class="quick-color" data-color="#DDA0DD" style="background:#DDA0DD" title="Purple"></button>
                        <button class="quick-color" data-color="#FFFFFF" style="background:#FFFFFF" title="White"></button>
                        <button class="quick-color" data-color="#000000" style="background:#000000;border:1px solid #444" title="Black"></button>
                    </div>
                </div>
                
                <div class="tool-divider"></div>
                
                <div class="tool-group">
                    <label class="tool-label">Size: <span id="size-value">5</span>px</label>
                    <input type="range" id="stroke-size" min="1" max="50" value="5" class="slider">
                </div>
                
                <div class="tool-divider"></div>
                
                <div class="tool-group actions">
                    <button id="undo-btn" class="tool-btn" title="Undo (Ctrl+Z)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 7v6h6"/>
                            <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/>
                        </svg>
                    </button>
                    <button id="redo-btn" class="tool-btn" title="Redo (Ctrl+Y)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 7v6h-6"/>
                            <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"/>
                        </svg>
                    </button>
                    <button id="clear-btn" class="tool-btn danger" title="Clear Canvas">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                        </svg>
                    </button>
                    <button id="reset-view-btn" class="tool-btn" title="Reset View (Center Canvas)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 2v4M12 18v4M2 12h4M18 12h4"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="toolbar-right">
                <!-- Users List -->
                <div class="users-container">
                    <span class="users-label">Online:</span>
                    <div id="users-list" class="users-list"></div>
                </div>
            </div>
        </header>

        <!-- Canvas Container -->
        <main class="canvas-container">
            <canvas id="drawing-canvas"></canvas>
            <!-- Ghost cursors will be rendered here -->
            <div id="cursors-container"></div>
        </main>

        <!-- Connection Status -->
        <div id="connection-status" class="status-indicator">
            <div class="status-dot"></div>
            <span class="status-text">Connecting...</span>
        </div>
        
        
        <div id="tool-indicator" class="tool-indicator">
            <span id="current-tool-name">Pen</span>
        </div>
    </div>

    
    <script src="/socket.io/socket.io.js"></script>
    <script src="canvas.js"></script>
    <script src="websocket.js"></script>
    <script src="main.js"></script>
</body>
</html>
